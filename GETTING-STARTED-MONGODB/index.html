<!doctype html>
<html lang="es" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-GETTING-STARTED-MONGODB">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Primeros pasos con MongoDB | Burger Queen - API con Node.js</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://your-docusaurus-test-site.com/DOCS-TEST-burger-queen-api/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://your-docusaurus-test-site.com/DOCS-TEST-burger-queen-api/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://your-docusaurus-test-site.com/DOCS-TEST-burger-queen-api/GETTING-STARTED-MONGODB"><meta data-rh="true" name="docusaurus_locale" content="es"><meta data-rh="true" name="docsearch:language" content="es"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Primeros pasos con MongoDB | Burger Queen - API con Node.js"><meta data-rh="true" name="description" content="MongoDB es un base de datos no-relacional, y es la más común (popular)"><meta data-rh="true" property="og:description" content="MongoDB es un base de datos no-relacional, y es la más común (popular)"><link data-rh="true" rel="icon" href="/DOCS-TEST-burger-queen-api/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://your-docusaurus-test-site.com/DOCS-TEST-burger-queen-api/GETTING-STARTED-MONGODB"><link data-rh="true" rel="alternate" href="https://your-docusaurus-test-site.com/DOCS-TEST-burger-queen-api/GETTING-STARTED-MONGODB" hreflang="es"><link data-rh="true" rel="alternate" href="https://your-docusaurus-test-site.com/DOCS-TEST-burger-queen-api/GETTING-STARTED-MONGODB" hreflang="x-default"><link rel="stylesheet" href="/DOCS-TEST-burger-queen-api/assets/css/styles.5077898e.css">
<link rel="preload" href="/DOCS-TEST-burger-queen-api/assets/js/runtime~main.3b08f34a.js" as="script">
<link rel="preload" href="/DOCS-TEST-burger-queen-api/assets/js/main.8311315d.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Saltar al contenido principal"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Saltar al contenido principal</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__brand" href="/DOCS-TEST-burger-queen-api/"><div class="navbar__logo"><img src="/DOCS-TEST-burger-queen-api/img/logo192.png" alt="Laboratoria logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/DOCS-TEST-burger-queen-api/img/logo192.png" alt="Laboratoria logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Burger Queen - API con Node.js</b></a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Volver al principio" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/DOCS-TEST-burger-queen-api/">Burger Queen - API con Node.js</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/DOCS-TEST-burger-queen-api/GETTING-STARTED-DOCKER">Primeros pasos</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/DOCS-TEST-burger-queen-api/GETTING-STARTED-MONGODB">Primeros pasos con MongoDB</a></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/DOCS-TEST-burger-queen-api/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Primeros pasos con MongoDB</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">En esta página</button></div><div class="theme-doc-markdown markdown"><h1>Primeros pasos con MongoDB</h1><p>MongoDB es un base de datos no-relacional, y es la más <em>común</em> (popular)
a día de hoy en el ecosistema de Node.js.</p><p>Si vas a trabajar con MongoDB y Docker, mejor lee primero
<a href="/DOCS-TEST-burger-queen-api/GETTING-STARTED-DOCKER"><strong>la guía de <em>primeros pasos con Docker</em></strong></a>.
Si vas a instalar MongoDB y desarrollar el proyecto sin
Docker en este momento, sigue leyendo esta guía.</p><p>Una vez creado tu fork y clonado el repo en tu computadora, haces <code>npm install</code>
para instalar las dependencias básicas.
Antes de poder comenzar a codear, tenemos que crear nuestro <em>entorno de desarrollo</em>.
Para ello te recomendamos seguir los siguientes pasos:</p><ul><li><a href="#1-instalar-mongodb-y-compass">1. Instalar MongoDB y Compass</a></li><li><a href="#2-levanta-la-base-de-datos-y-servidor">2. Levanta la base de datos y servidor</a></li><li><a href="#3-elegir-m%C3%B3dulo-cliente">3. Elegir módulo (cliente)</a></li><li><a href="#4-definir-esquemas">4. Definir esquemas</a></li><li><a href="#5-implementar-los-primeros-todos">5. Implementar los primeros TODOs</a></li><li><a href="#6-definir-estrategia-de-pruebas-unitarias">6. Definir estrategia de pruebas unitarias</a></li><li><a href="#7-familiarizarte-con-las-pruebas-de-integraci%C3%B3n-e2e">7. Familiarizarte con las pruebas de integración (e2e)</a></li></ul><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-instalar-mongodb-y-compass">1. Instalar MongoDB y Compass<a href="#1-instalar-mongodb-y-compass" class="hash-link" aria-label="Enlace directo al 1. Instalar MongoDB y Compass" title="Enlace directo al 1. Instalar MongoDB y Compass">​</a></h2><p>El sitio de MongoDB tiene tutoriales de cómo instalar la <a href="https://www.mongodb.com/docs/compass/current/install/" target="_blank" rel="noopener noreferrer">Community Edition</a>.
Elige tu plataforma (Windows, Mac, Ubuntu etc) y sigue <a href="https://www.mongodb.com/docs/manual/installation/#mongodb-installation-tutorials" target="_blank" rel="noopener noreferrer">el tutorial</a>.</p><p>Con los tutoriales, vas a descargar y instalar MongoDB en tu sistema,
con algunas herramientas y comandos para usar en la línea de comando.</p><p>También recomendamos que instales <a href="https://www.mongodb.com/products/compass" target="_blank" rel="noopener noreferrer">Compass</a>,
que es un GUI (Graphical User Interface) para interactuar con la base de datos.
Puedes interactuar con MongoDB sin Compass y solo en la linea de comando,
pero un GUI puede ayudarte visualizar y entender lo que está en
la base de datos. Sigue <a href="https://www.mongodb.com/docs/compass/current/install/" target="_blank" rel="noopener noreferrer">las instrucciones de instalación de Compass</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-levanta-la-base-de-datos-y-servidor">2. Levanta la base de datos y servidor<a href="#2-levanta-la-base-de-datos-y-servidor" class="hash-link" aria-label="Enlace directo al 2. Levanta la base de datos y servidor" title="Enlace directo al 2. Levanta la base de datos y servidor">​</a></h2><p>Podemos decir que este proyecto tiene dos &quot;servicios&quot;, uno es la base de datos para
almacenar los productos, usuarios, etc., y el otro es el servidor para exponer
el API.</p><p>Estos servicios tienen que estar corriendo, para que
el API pueda funcionar.</p><p>Correr el servidor es bien simple: con <code>npm start</code> va a ejecutar
que tiene la lógica básica de un servidor con express.</p><p>Cómo levantar el servidor, este depende de tu instalación y sistema.
Por ejemplo, en MacOS si instalaste con <code>homebrew</code>, puede usar
<code>brew services start mongodb-community@6.0</code> para levantarlo. O sin <code>homebrew</code>,
<code>mongod --config /usr/local/etc/mongod.conf --fork</code>. En Windows, hay que
levantarlo desde Services console.</p><p>Revisa <a href="https://www.mongodb.com/docs/manual/tutorial/install-mongodb-on-os-x/#run-mongodb-community-edition" target="_blank" rel="noopener noreferrer">la guía de instalación de
</a>,
<a href="https://www.mongodb.com/docs/manual/tutorial/install-mongodb-on-windows/#run-mongodb-community-edition-as-a-windows-service" target="_blank" rel="noopener noreferrer">guía de instalación de Windows</a>,
o tu instalación en particular, para ejemplos en cómo levantarlo.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-elegir-módulo-cliente">3. Elegir módulo (cliente)<a href="#3-elegir-módulo-cliente" class="hash-link" aria-label="Enlace directo al 3. Elegir módulo (cliente)" title="Enlace directo al 3. Elegir módulo (cliente)">​</a></h2><p>Ahora que ya tenemos un servidor de base de datos, vamos a necesitar elegir un
módulo o librería diseñado para interactuar con nuestra base de datos desde
Node.js. Existen un montón de opciones, pero para este proyecto te recomendamos
usar el <a href="https://www.mongodb.com/docs/drivers/node/current/" target="_blank" rel="noopener noreferrer">Node.js driver de MongoDB</a>
que es la forma más directa de interactuar con tu instancia de MongoDB.</p><p>Hay que instalar el Node.js Driver en este proyecto usando <code>npm</code>,
revisa <a href="https://www.mongodb.com/docs/drivers/node/current/quick-start/download-and-install/#install-the-node.js-driver" target="_blank" rel="noopener noreferrer">la documentación oficial para más información</a>.</p><p>El <em>boilerplate</em> ya incluye un archivo <code>config.js</code> donde se leen las
variables de entorno, y entre ellas está <code>DB_URL</code>. Como vemos ese valor lo
estamos asignando en la propiedad <code>dbUrl</code> del módulo <code>config</code>.</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// `config.js`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exports</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">dbUrl</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> process</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">env</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token constant" style="color:rgb(130, 170, 255)">MONGO_URL</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">||</span><span class="token plain"> process</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">env</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token constant" style="color:rgb(130, 170, 255)">DB_URL</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">||</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;mongodb://127.0.0.1:27017/test&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código al portapapeles" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Ahora que ya sabemos dónde encontrar el <em>connection string</em> (en el módulo
config), podemos proceder a establecer una conexión con la base de datos
usando el cliente elegido.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ejemplo-de-conexión-usando-mongodb-node-driver">Ejemplo de conexión usando MongoDB Node Driver<a href="#ejemplo-de-conexión-usando-mongodb-node-driver" class="hash-link" aria-label="Enlace directo al Ejemplo de conexión usando MongoDB Node Driver" title="Enlace directo al Ejemplo de conexión usando MongoDB Node Driver">​</a></h3><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token maybe-class-name">MongoClient</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">require</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;mongodb&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> config </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">require</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;./config&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> client </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">MongoClient</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">config</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">dbUrl</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">async</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">connect</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword control-flow" style="font-style:italic">try</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword control-flow" style="font-style:italic">await</span><span class="token plain"> client</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">connect</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> db </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> client</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">db</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token constant" style="color:rgb(130, 170, 255)">NOMBRE_DB</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Reemplaza &lt;NOMBRE_DB&gt; por el nombre del db</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword control-flow" style="font-style:italic">return</span><span class="token plain"> db</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="font-style:italic">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">error</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código al portapapeles" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Puedes encontrar mas ejemplos en <a href="https://www.mongodb.com/docs/drivers/node/current/" target="_blank" rel="noopener noreferrer">la documentación de MongoDB</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="4-definir-esquemas">4. Definir esquemas<a href="#4-definir-esquemas" class="hash-link" aria-label="Enlace directo al 4. Definir esquemas" title="Enlace directo al 4. Definir esquemas">​</a></h2><p>Como parte del proceso de diseño de nuestra base de datos vamos a tener que
especificar los <em>esquemas</em> de nuestros <em>modelos</em> de datos. Con esto nos
referimos a que tenemos que <em>describir</em> de alguna forma la estructura de las colecciones
que vamos a usar y la <em>forma</em> de los objetos que vayamos a
guardar en esas colecciones.</p><p>Puedes usar <a href="https://app.swaggerhub.com/apis-docs/ssinuco/BurgerQueenAPI/2.0.0" target="_blank" rel="noopener noreferrer">la documentación de API</a>
que describe la estructura de <code>products</code>, <code>orders</code>, etc. para guiar el diseño.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="5-implementar-los-primeros-todos">5. Implementar los primeros TODOs<a href="#5-implementar-los-primeros-todos" class="hash-link" aria-label="Enlace directo al 5. Implementar los primeros TODOs" title="Enlace directo al 5. Implementar los primeros TODOs">​</a></h2><p>El boilerplate del proyecto viene con archivos con lógica para arrancar el server
y otros que contienen funciones de rutas y autenticación, pero muchas están vacías.
Hemos marcado las primeras partes esenciales con comentarios <code>TODO</code>
(del inglés <em>por hacer</em>), que es una convención en el desarrollo de software,
cuando queda algo pendiente de hacer.</p><p>Aquí te guiamos un poco sobre esto TODO&#x27;s.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="todo-1-conectar-a-la-base-de-datos">TODO 1: Conectar a la base de datos<a href="#todo-1-conectar-a-la-base-de-datos" class="hash-link" aria-label="Enlace directo al TODO 1: Conectar a la base de datos" title="Enlace directo al TODO 1: Conectar a la base de datos">​</a></h3><p>En el archivo <code>connect.js</code> hay que hacer la conexión con la base de datos.</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> dbUrl </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> config</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">async</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">connect</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// TODO: Conexión a la Base de Datos</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código al portapapeles" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Aquí debes usar el <code>dbUrl</code> que importamos del config para establecer la conexión.
Las funciones que van a interactuar con la base de datos tienen que invocar
<code>connect</code>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="todo-2-crear-el-usuario-admin">TODO 2: Crear el usuario <em>admin</em><a href="#todo-2-crear-el-usuario-admin" class="hash-link" aria-label="Enlace directo al todo-2-crear-el-usuario-admin" title="Enlace directo al todo-2-crear-el-usuario-admin">​</a></h3><p>El proyecto depende en la existencia de un usuario en la base de datos que
tiene privilegios de administrador, para así poder crear otros usuarios, etc.</p><p>En <code>routes/users.js</code> invocamos una función <code>initAdminUser(app, next)</code>
al final de archivo, y definimos esta función arriba en este misma archivo.</p><p><code>initAdminUser</code> está incompleto, y hay un TODO para crear el usuario admin,
donde tienes que primero chequear si un admin ya existe, y si no agregar uno
a la base de datos.</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(130, 170, 255)">initAdminUser</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">app</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token parameter"> next</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> adminEmail</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> adminPassword </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> app</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">get</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;config&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword control-flow" style="font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token operator" style="color:rgb(137, 221, 255)">!</span><span class="token plain">adminEmail </span><span class="token operator" style="color:rgb(137, 221, 255)">||</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">!</span><span class="token plain">adminPassword</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword control-flow" style="font-style:italic">return</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">next</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> adminUser </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token literal-property property">email</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> adminEmail</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token literal-property property">password</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> bcrypt</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">hashSync</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">adminPassword</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">10</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token literal-property property">roles</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token literal-property property">admin</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// TODO: crear usuaria admin</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">next</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token maybe-class-name">Puedes</span><span class="token plain"> confirmar si tu código funciona revisando la base de datos y con un testeo unitario</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código al portapapeles" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="todo-3-implementar-autenticación-de-usuario">TODO 3: Implementar autenticación de usuario<a href="#todo-3-implementar-autenticación-de-usuario" class="hash-link" aria-label="Enlace directo al TODO 3: Implementar autenticación de usuario" title="Enlace directo al TODO 3: Implementar autenticación de usuario">​</a></h3><p>En <code>routes/auth.js</code> está la ruta &#x27;/auth&#x27; definida, con un</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// TODO: autenticar a la usuarix</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código al portapapeles" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Aquí es donde debes verificar que el correo y password coinciden con
datos de algún usuario en la base de datos. Si coinciden, hay que generar un
<a href="https://jwt.io/introduction" target="_blank" rel="noopener noreferrer">JWT token</a>
y mandarlo en la respuesta, para que el usuario puede usarlo en sus peticiones futuras.
Para ejemplos con mas detalle, busca tutoriales de autenticación con JWT y node/express.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="todo-4-implementar-el-middleware-de-autenticación">TODO 4: Implementar el middleware de autenticación<a href="#todo-4-implementar-el-middleware-de-autenticación" class="hash-link" aria-label="Enlace directo al TODO 4: Implementar el middleware de autenticación" title="Enlace directo al TODO 4: Implementar el middleware de autenticación">​</a></h3><p>En <code>middleware/auth.js</code> hay varios <code>TODOs</code>. Usa esta oportunidad para familiarizarte
con <a href="https://expressjs.com/es/guide/using-middleware.html" target="_blank" rel="noopener noreferrer">el concepto de middleware en express</a>.</p><p>La aplicación va a usar este middleware para chequear que las peticiones
que requieren autenticación sean autorizados, es decir, que tienen un token válido.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="todo-5-implementar-la-ruta-get-users">TODO 5: Implementar la ruta GET <code>/users</code><a href="#todo-5-implementar-la-ruta-get-users" class="hash-link" aria-label="Enlace directo al todo-5-implementar-la-ruta-get-users" title="Enlace directo al todo-5-implementar-la-ruta-get-users">​</a></h3><p>Para juntar y verificar todo el trabajo que has hecho, seria bueno implementar
una ruta básica del API, en este caso recomendamos <code>/users</code> porque ya debes
tener el user admin en tu base de datos, y además porque esta ruta usa
el middleware de auth.</p><p>Vas a ver que la ruta <code>/users</code> usa la función <code>getUsers</code> que está definido en
<code>controller/users.js</code>. El concepto de controller nos sirve para separar más
la lógica de la definición de rutas con la implementación que va a hablar con
el base de datos. Hay que implementar <code>getUsers</code> para obtener la lista de
users de la colección en tu base de datos.</p><p>Revisa <a href="https://developer.mozilla.org/en-US/docs/Learn/Server-side/Express_Nodejs/routes" target="_blank" rel="noopener noreferrer">el tutorial de Node y express en Mozilla</a>
que habla de controllers.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="todo-6-implementar-la-ruta-post-users">TODO 6: Implementar la ruta POST <code>/users</code><a href="#todo-6-implementar-la-ruta-post-users" class="hash-link" aria-label="Enlace directo al todo-6-implementar-la-ruta-post-users" title="Enlace directo al todo-6-implementar-la-ruta-post-users">​</a></h3><p>Los tests e2e invocan la ruta POST <code>/users</code> para agregar la usuaria para los tests.
Por lo tanto, antes de poder ejecutar los tests e2e, esta ruta debe funcionar
correctamente.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="6-definir-estrategia-de-pruebas-unitarias">6. Definir estrategia de pruebas unitarias<a href="#6-definir-estrategia-de-pruebas-unitarias" class="hash-link" aria-label="Enlace directo al 6. Definir estrategia de pruebas unitarias" title="Enlace directo al 6. Definir estrategia de pruebas unitarias">​</a></h2><p>Además de las pruebas <code>e2e</code> que ya incluye el <em>boilerplate</em> del proyecto, se
espera que puedas también usar pruebas <em>unitarias</em> para el desarrollo de los
diferentes <em>endpoints</em> o <em>rutas</em> así como otros módulos internos que decidas
desarrollar.</p><p>Para hacer pruebas unitarias de <em>rutas</em> de Express, te recomendamos explorar la
librería <a href="https://www.npmjs.com/package/supertest" target="_blank" rel="noopener noreferrer"><code>supertest</code></a>, que puedes usar
en combinación con <code>jest</code>.</p><p>Otro punto a tener en cuenta en las pruebas unitarias, es cómo <em>mockear</em> la base
de datos. Algunas bases de datos ofrecen herramientas (como
<a href="https://github.com/nodkz/mongodb-memory-server" target="_blank" rel="noopener noreferrer"><code>mongodb-memory-server</code></a>) que
nos permiten usar una base de datos en memoria y así evitar hacer <em>mocks</em> per
se, pero por lo general querremos considerar cómo abstraer la interacción
con la base de datos para facilitar <em>mocks</em> que nos permitan concentrarnos en
la lógica de las rutas.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="7-familiarizarte-con-las-pruebas-de-integración-e2e">7. Familiarizarte con las pruebas de integración (e2e)<a href="#7-familiarizarte-con-las-pruebas-de-integración-e2e" class="hash-link" aria-label="Enlace directo al 7. Familiarizarte con las pruebas de integración (e2e)" title="Enlace directo al 7. Familiarizarte con las pruebas de integración (e2e)">​</a></h2><p>El <em>boilerplate</em> de este proyecto ya incluye pruebas <code>e2e</code> (end-to-end) o de
<em>integración</em>, que se encargan de probar nuestra aplicación en conjunto,
a través de la interfaz HTTP. A diferencia de las pruebas unitarias, en vez
de importar o requerir un módulo y probar una función de forma aislada, lo que
vamos a hacer es arrancar toda la aplicación, y probarla tal como se usaría en
el mundo real, para ello la aplicación de prueba necesitará una base de datos y
escuchar en un puerto de red.</p><p>Para correr pruebas e2e sobre instancia local podemos usar:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">npm run test:e2e</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código al portapapeles" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Esto levanta la aplicación con <code>npm start</code> y corre los tests contra la URL de
esta instancia (por defecto <code>http://127.0.0.1:8080</code>).</p><p>Los pruebas e2e dependen del código de (<code>globalSetup.js</code>)<!-- -->[../e2e/globalSetup.js]<!-- -->
que <code>jest</code> ejecuta en primer lugar, antes de los tests.
Este paso de setup levanta un mock db (como hemos hablado de
<a href="https://github.com/nodkz/mongodb-memory-server" target="_blank" rel="noopener noreferrer"><code>mongodb-memory-server</code></a>)
y jest se conecta a este mock db.</p><p>Para este configuración usamos <code>mongodb-memory-server</code> y
un preset <a href="https://github.com/shelfio/jest-mongodb" target="_blank" rel="noopener noreferrer"><code>jest-mongodb</code></a>
que ya están incluido en el boilerplate.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Página del documento"><a class="pagination-nav__link pagination-nav__link--prev" href="/DOCS-TEST-burger-queen-api/GETTING-STARTED-DOCKER"><div class="pagination-nav__sublabel">Anterior</div><div class="pagination-nav__label">Primeros pasos</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1-instalar-mongodb-y-compass" class="table-of-contents__link toc-highlight">1. Instalar MongoDB y Compass</a></li><li><a href="#2-levanta-la-base-de-datos-y-servidor" class="table-of-contents__link toc-highlight">2. Levanta la base de datos y servidor</a></li><li><a href="#3-elegir-módulo-cliente" class="table-of-contents__link toc-highlight">3. Elegir módulo (cliente)</a><ul><li><a href="#ejemplo-de-conexión-usando-mongodb-node-driver" class="table-of-contents__link toc-highlight">Ejemplo de conexión usando MongoDB Node Driver</a></li></ul></li><li><a href="#4-definir-esquemas" class="table-of-contents__link toc-highlight">4. Definir esquemas</a></li><li><a href="#5-implementar-los-primeros-todos" class="table-of-contents__link toc-highlight">5. Implementar los primeros TODOs</a><ul><li><a href="#todo-1-conectar-a-la-base-de-datos" class="table-of-contents__link toc-highlight">TODO 1: Conectar a la base de datos</a></li><li><a href="#todo-2-crear-el-usuario-admin" class="table-of-contents__link toc-highlight">TODO 2: Crear el usuario <em>admin</em></a></li><li><a href="#todo-3-implementar-autenticación-de-usuario" class="table-of-contents__link toc-highlight">TODO 3: Implementar autenticación de usuario</a></li><li><a href="#todo-4-implementar-el-middleware-de-autenticación" class="table-of-contents__link toc-highlight">TODO 4: Implementar el middleware de autenticación</a></li><li><a href="#todo-5-implementar-la-ruta-get-users" class="table-of-contents__link toc-highlight">TODO 5: Implementar la ruta GET <code>/users</code></a></li><li><a href="#todo-6-implementar-la-ruta-post-users" class="table-of-contents__link toc-highlight">TODO 6: Implementar la ruta POST <code>/users</code></a></li></ul></li><li><a href="#6-definir-estrategia-de-pruebas-unitarias" class="table-of-contents__link toc-highlight">6. Definir estrategia de pruebas unitarias</a></li><li><a href="#7-familiarizarte-con-las-pruebas-de-integración-e2e" class="table-of-contents__link toc-highlight">7. Familiarizarte con las pruebas de integración (e2e)</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">&lt;Laboratoria&gt;</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.facebook.com/laboratoriala/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Facebook</a></li><li class="footer__item"><a href="https://www.instagram.com/laboratoriala/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Instagram</a></li><li class="footer__item"><a href="https://www.linkedin.com/school/laboratoria/mycompany/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Linkedin</a></li><li class="footer__item"><a href="https://twitter.com/Laboratoriala" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li><li class="footer__item"><a href="https://www.youtube.com/channel/UC3LdpwpeIJqbm4hafXXqRHA" target="_blank" rel="noopener noreferrer" class="footer__link-item">Youtube</a></li></ul></div><div class="col footer__col"><div class="footer__title">CONOCE MÁS</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.laboratoria.la/contactanos" target="_blank" rel="noopener noreferrer" class="footer__link-item">Contáctanos<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://hub.laboratoria.la/?utm_source=site-laboratoria&amp;utm_medium=footer&amp;utm_campaign=Hub%2520de%2520Laboratoria&amp;_ga=2.140963249.2026375068.1687520629-326958292.1683129027" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.laboratoriaplus.la/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Conoce Laboratoria+<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.laboratoria.la/privacy" target="_blank" rel="noopener noreferrer" class="footer__link-item">Política de privacidad<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.laboratoria.la/terminosycondiciones" target="_blank" rel="noopener noreferrer" class="footer__link-item">Términos y condiciones<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">INVOLÚCRATE</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://bootcamp.laboratoria.la/es/?utm_source=web_laboratoria&amp;utm_medium=footer&amp;utm_campaign=footer_web&amp;_ga=2.140963249.2026375068.1687520629-326958292.1683129027" target="_blank" rel="noopener noreferrer" class="footer__link-item">Postula al bootcamp</a></li><li class="footer__item"><a href="https://talento.laboratoria.la/?utm_source=site-laboratoria&amp;utm_medium=footer&amp;_ga=2.140963249.2026375068.1687520629-326958292.1683129027" target="_blank" rel="noopener noreferrer" class="footer__link-item">Contrata talento<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.laboratoria.la/trabaja-con-nosotros" target="_blank" rel="noopener noreferrer" class="footer__link-item">Trabaja con nosotros/as<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Laboratoria. Todos los derechos reservados.</div></div></div></footer></div>
<script src="/DOCS-TEST-burger-queen-api/assets/js/runtime~main.3b08f34a.js"></script>
<script src="/DOCS-TEST-burger-queen-api/assets/js/main.8311315d.js"></script>
</body>
</html>